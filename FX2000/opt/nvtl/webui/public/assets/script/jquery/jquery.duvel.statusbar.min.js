!function(t){var a=null,s={},e={},r={},u=0,n={url:"/srv/status",groupClass:"status clearfix",battNumOfBars:4,lowBatteryThreshold:15,pollingRate:5e3,errorMax:2},i=!1,o=!1,l=!1,c=!1,m=!1;t.statusBar=function(a){return h(),d[a]?d[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist in jQuery.statusBar"):d.init.apply(this,arguments)},t.fn.statusBar=function(a){var s=this,e=arguments;return h(),s.each(function(){if(B[a])return B[a].apply(s,Array.prototype.slice.call(e,1));t.error("Method "+a+" does not exist in jQuery.fn.statusBar")})};var d={version:function(){return"1.0 (Rooney)"},init:function(a){(s=t.extend(!0,n,a)).statusBars&&!t.isEmptyObject(s.statusBars)?(t.each(s.statusBars,function(a){var u=s.statusBars[a].name;e[u]=t(T(s.statusBars[a].structure)),r[u]=u}),N()):t.error("No status bar(s) defined.")},destroy:function(a){void 0!==a&&""!==a?(d.stop(a),e[a].remove(),delete e[a]):(d.stop(),t.each(s.statusBars,function(t){var a=s.statusBars[t].name;e[a].remove(),delete e[a],delete r[a]}))},start:function(t){void 0!==t&&""!==t?f(t)&&(r[t]=t):N()},autoStop:function(t,a){void 0!==a&&""!==a?setTimeout(function(){d.stop(a)},t):setTimeout(d.stop,t)},stop:function(t){void 0!==t&&""!==t?delete r[t]:clearTimeout(a)},refresh:function(t,a){var s=t||0,e=a||"";d.stop(e),s>0?setTimeout(function(){d.start(e)},s):d.start(e)}},B={attach:function(a){e[a]?t(this).empty().append(e[a]):t.error("The jQuery.statusBar has not been properly initialized.")}},S={updateAirplaneMode:function(a,s){var e=v(s,"statusBarAirplaneMode");if(e){var r=g(s,"keys","statusBarAirplaneMode");if(t.inArray("statusBarAirplaneMode",r)>-1&&C(a.statusBarAirplaneMode)&&a.statusBarAirplaneMode===t.uiEnums.RADIO_OFF)return p(s,"hide",["statusBarTechnology","statusBarTrafficStatus","statusBarSignalBars","statusBarNetwork","statusBarConnectionState","statusBarFemtoCellStatus","statusBarSimStatus","statusBarSimCarrierBlockedStatus"]),e.removeClass().addClass("airplane_"+E(a.statusBarAirplaneMode)),S.updateBatteryStatus(a,s),S.updateConnectedDevicesStatus(a,s),!1;e.removeClass().parent().hide(),p(s,"show",["statusBarTechnology","statusBarTrafficStatus","statusBarSignalBars","statusBarNetwork","statusBarConnectionState","statusBarSimStatus","statusBarSimCarrierBlockedStatus"])}},updateSimStatus:function(a,e){var r=v(e,"statusBarSimStatus");if(r){var u=g(e,"keys",["statusBarSimStatus","statusBarSimCarrierBlockedStatus"]),n="sim_ready",i="";if(t.inArray("statusBarSimStatus",u)>-1&&C(a.statusBarSimStatus)&&(a.statusBarSimStatus!==t.uiEnums.SIMSTATUS_READY||a.statusBarSimStatus!==t.uiEnums.SIMSTATUS_UNLOCKED))switch(n="sim_"+E(a.statusBarSimStatus),a.statusBarSimStatus){case t.uiEnums.SIMSTATUS_NOT_FOUND:i=s.simNoSimText,m=!0;break;case t.uiEnums.SIMSTATUS_PIN_LOCKED:i=s.simPinLockedText,c=!0;break;case t.uiEnums.SIMSTATUS_PUK_LOCKED:i=s.simPukLockedText,c=!0;break;case t.uiEnums.SIMSTATUS_NOT_SUPPORTED:i=s.simInvalidText,l=!0;break;case t.uiEnums.SIMSTATUS_RESTRICTED:i=s.simRestrictedText,l=!0;break;case t.uiEnums.SIMSTATUS_PAIR_LOCKED:i=s.simPairLockedText,l=!0;break;case t.uiEnums.SIMSTATUS_ERROR:C(a.statusBarSimCarrierBlockedStatus)&&a.statusBarSimCarrierBlockedStatus===t.uiEnums.BOOLTYPE_NUMERIC_TRUE?(n="sim_invalid",i=s.simInvalidText):(n="sim_error",i=s.simErrorText),l=!0}if(""!==i)return p(e,"hide",["statusBarFemtoCellStatus","statusBarRoaming","statusBarTrafficStatus","statusBarTechnology"]),_(e,"hide",["mobileStatusBarFemtoCellStatus","mobileStatusBarRoaming"]),r.parent("li").show(),r.parents("ul").addClass("sim_status_error"),r.removeClass().addClass("text "+n).html(i),S.updateBatteryStatus(a,e),S.updateConnectedDevicesStatus(a,e),S.updateAirplaneMode(a,e),S.updateSignalStrengthStatus(a,e),S.updateNetworkStatus(a,e),S.updateMobileNetworkStatus(a,e),!1;l=!1,c=!1,m=!1,r.parents("ul").removeClass("sim_status_error"),r.removeClass().html("").parents("li, ul").hide(),r.removeClass().html("").parent("li").hide(),p(e,"show",["statusBarFemtoCellStatus","statusBarRoaming","statusBarTrafficStatus","statusBarTechnology"]),_(e,"show",["statusBarSignalBars"])}},updateWanTechStatus:function(a,e){var r=v(e,"statusBarConnectionState");if(r){var u=g(e,"keys","statusBarConnectionState"),n="";if(t.inArray("statusBarConnectionState",u)>-1&&C(a.statusBarConnectionState))switch(a.statusBarConnectionState){case t.uiEnums.WANSTATE_NOSERVICE:n=s.wanNoServiceText,i=!0;break;case t.uiEnums.WANSTATE_SEARCHING:n=s.wanSearchingText,o=!0;break;case t.uiEnums.WANSTATE_PCO5:n=s.wanNoServiceText,i=!0}if(""!==n)return p(e,"hide",["statusBarFemtoCellStatus","statusBarRoaming","statusBarTrafficStatus","statusBarTechnology"]),_(e,"hide",["mobileStatusBarFemtoCellStatus","mobileStatusBarRoaming"]),r.parent("li").show(),r.parents("ul").addClass("wan_tech_error"),r.removeClass().addClass("text nopadding wan_tech_error").html(n),S.updateBatteryStatus(a,e),S.updateConnectedDevicesStatus(a,e),S.updateAirplaneMode(a,e),S.updateSignalStrengthStatus(a,e),S.updateNetworkStatus(a,e),S.updateMobileNetworkStatus(a,e),!1;i=!1,o=!1,r.parents("ul").removeClass("wan_tech_error"),r.removeClass().html("").parents("li, ul").hide(),r.removeClass().html("").parent("li").hide(),p(e,"show",["statusBarFemtoCellStatus","statusBarRoaming","statusBarTrafficStatus","statusBarTechnology"]),_(e,"show",["statusBarSignalBars"])}},updateBatteryStatus:function(a,e){var r=["statusBarBatteryChargingSource","statusBarBatteryChargingState","statusBarBatteryPercent","statusBarBatteryDetection"],u=v(e,r);if(u){var n=g(e,"keys",r),i="batt_none";if(t.inArray("statusBarBatteryDetection",n)>-1&&C(a.statusBarBatteryDetection)&&a.statusBarBatteryDetection===t.uiEnums.BATTERY_DETECTION_PRESENT){var o="";if(t.inArray("statusBarBatteryChargingSource",n)>-1&&C(a.statusBarBatteryChargingSource)&&a.statusBarBatteryChargingSource!==t.uiEnums.CHARGINGSOURCE_NONE&&(o=E(a.statusBarBatteryChargingSource)+"_"),t.inArray("statusBarBatteryPercent",n)>-1&&C(a.statusBarBatteryPercent)&&a.statusBarBatteryPercent>-1){var l=a.statusBarBatteryPercent,c=a.statusBarBatteryPercent+"%";if(l<=s.lowBatteryThreshold)i="batt_"+o+"low";else{var m=100/s.battNumOfBars;i="batt_"+o+Math.round(l/m)}}}u.removeClass().addClass(i).text(c)}},updateConnectedDevicesStatus:function(t,a){var s=v(a,["statusBarWiFiClientListSize","statusBarWiFiEnabled"]);s&&(C(t.statusBarWiFiEnabled)&&0==t.statusBarWiFiEnabled?s.empty().removeClass().addClass("tethered_usb"):s.empty().removeClass())},updateFemtoRoamStatus:function(a,s){var e=v(s,["statusBarFemtoCellStatus","statusBarRoaming"]);if(e){var r=a.statusBarRoaming,u="femto_roam_none";C(a.statusBarRoaming)&&r!==t.uiEnums.ROAMNONE&&e.removeClass().text("R"),C(a.statusBarFemtoCellStatus)&&a.statusBarFemtoCellStatus===t.uiEnums.BOOLTYPE_NUMERIC_TRUE&&(u="femto_on",e.removeClass().text("").addClass(u))}},updateMobileFemtoRoamStatus:function(a,s){var e=v(s,["mobileStatusBarFemtoCellStatus","mobileStatusBarRoaming"]);if(e){e.parent("li").show();var r=a.statusBarRoaming;C(a.statusBarRoaming)&&r!==t.uiEnums.ROAMNONE||C(a.statusBarFemtoCellStatus)&&a.statusBarFemtoCellStatus===t.uiEnums.BOOLTYPE_NUMERIC_TRUE?(C(a.statusBarRoaming)&&r!==t.uiEnums.ROAMNONE&&(e.removeClass().text("R"),!0),C(a.statusBarFemtoCellStatus)&&a.statusBarFemtoCellStatus===t.uiEnums.BOOLTYPE_NUMERIC_TRUE&&(e.removeClass().text("").addClass("femto_on"),!1)):(e.removeClass().addClass("femto_roam_none"),e.parent("li").hide(),!1)}},updateNetworkStatus:function(t,a){var s=v(a,["statusBarNetwork","statusBarNetworkID"]);if(s){var e=t.statusBarNetwork;s.removeClass().addClass("text network_name").text(e)}},updateMobileNetworkStatus:function(t,a){var s=v(a,["mobileStatusBarNetwork","mobileStatusBarNetworkID"]);if(s){var e="";i||o||l||c||m?(s.removeClass().text(""),s.parent("li").hide()):(C(t.statusBarNetwork)&&(e=t.statusBarNetwork),s.parent("li").show(),s.removeClass().addClass("text network_name").text(e))}},updateSignalStrengthStatus:function(t,a){var s=v(a,"statusBarSignalBars");s&&(i?s.removeClass().addClass("no_service"):l?s.removeClass().addClass("sim_error"):c?s.removeClass().addClass("sim_locked"):m?s.removeClass().addClass("sim_no_sim"):C(t.statusBarSignalBars)?s.removeClass().addClass("rssi_"+t.statusBarSignalBars):s.removeClass().addClass("rssi_0"))},updateTechStatus:function(a,s){var e=v(s,"statusBarTechnology");if(e){var r="tech_none";if(C(a.statusBarTechnology)){var u=a.statusBarTechnology;a.statusBarConnectionState===t.uiEnums.WANSTATE_PCO3?r="tech_4glte_slash":u===t.uiEnums.WANTECH_NONE?_(s,"hide",["statusBarTechnology"]):u===t.uiEnums.WANTECH_EVDO_EHRPD||u===t.uiEnums.WANTECH_EVDO||u===t.uiEnums.WANTECH_EVDO_REVA||u===t.uiEnums.WANTECH_EVDO_REVB||u===t.uiEnums.WANTECH_UMTS?r="tech_3g":u===t.uiEnums.WANTECH_HSPA_PLUS||u===t.uiEnums.WANTECH_HSPA_PLUS_DC||u===t.uiEnums.WANTECH_HSPDA||u===t.uiEnums.WANTECH_HSUPA?r="tech_h":u===t.uiEnums.WANTECH_LTE?r="tech_4glte":u===t.uiEnums.WANTECH_LTE_CA?r="tech_4glte_plus":u===t.uiEnums.WANTECH_5G&&(r="tech_5g"),e.removeClass().addClass(r)}}},updateTrafficStatus:function(t,a){var s=v(a,"statusBarTrafficStatus");if(s){var e="activity_none";C(t.statusBarTrafficStatus)&&(e="activity_"+E(t.statusBarTrafficStatus)),s.removeClass().addClass(e)}}},h=function(){t.uiEnums||t.error("Can't find jQuery.uiEnums object.")},C=function(t){return void 0!==t&&""!==t},f=function(a){var s=!1;return t.each(e,function(t){if(e[t]===a)return s=!0,!1}),s||t.error('Status bar named, "'+a+'", has not been instantiated.'),s},E=function(t){return t.toLowerCase().replace(/ /g,"_")},T=function(a){var e="";return t.each(a,function(a,r){e+='<ul id="'+a+'" class="'+s.groupClass+'" style="display:none;">',t.each(r,function(t){e+='<li id="item_'+t+'"><span id="'+t+'" style="display:none;"></span></li>'}),e+="</ul>"}),e},p=function(a,e,r){t.each(s.statusBars[a].structure,function(a,s){t.each(s,function(s,u){t.each(r,function(s){if(t.inArray(r[s],u)>-1){var n=t("#"+a);"hide"===e&&n.hide(),"show"===e&&n.children(":hidden").length!=n.children().length&&n.show()}})})})},_=function(a,e,r){t.each(s.statusBars[a].structure,function(a,s){t.each(s,function(s,u){t.each(r,function(n){if(t.inArray(r[n],u)>-1){var i=t("#"+a),o=t("#"+s);"hide"===e&&(o.removeClass().hide(),o.parent("li").hide(),i.children(":hidden").length==i.children().length&&i.hide()),"show"===e&&(i.show(),o.parent("li").show(),o.show()),y(i)}})})})},v=function(a,s){var r=null,u=g(a,"id",s,!0);return""!==u&&((r=t("#"+u).length>0?t("#"+u):e[a].find("#"+u)).parents("li, ul").show(),r.show(),y(r.parent("li").parent("ul"))),r},y=function(t){1==t.children(":visible").length?t.children(":visible").css({"margin-left":0,"margin-right":0}):t.children(":visible").css({"margin-left":"","margin-right":""})},g=function(a,e,r,u){var n=void 0!==u&&u,i="",o=[];return t.each(s.statusBars[a].structure,function(a,s){t.each(s,function(a,s){t.isArray(r)?n?0==t(r).not(s).length&&0==t(s).not(r).length&&(i=a,o=s):t.each(r,function(e){t.inArray(r[e],s)>-1&&(i=a,o=s)}):t.inArray(r,s)>-1&&(i=a,o=s)})}),"id"===e?i:"keys"===e?o:void 0},A=function(){++u>s.errorMax&&(u=0,s.errorCallback&&s.errorCallback())},N=function(){if(!S)return t.error("Status bar updating methods are not defined."),!1;t.ajax({url:s.url,type:"GET",dataType:"json",timeout:2*s.pollingRate,cache:!1,success:function(a,e,n){4==n.readyState&&n.status>0?(u=0,t.each(r,function(s,e){t.each(S,function(t){return S[t].call(this,a.statusData,e)})}),s.successCallback&&s.successCallback()):A()},error:function(t,a,e){"error"==a?A():"timeout"==a&&s.timeoutCallback&&s.timeoutCallback()},complete:function(t,e){s.completeCallback&&s.completeCallback(),s.pollingRate?a=setTimeout(N,s.pollingRate):N()}})}}(jQuery);
