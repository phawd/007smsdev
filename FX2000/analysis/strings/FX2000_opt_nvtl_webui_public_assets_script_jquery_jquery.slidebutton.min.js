 * slideButton jQuery Plug-in
 * Copyright 2013 Novatel Wireless (http://www.nvtl.com/)
 * Date:   2014-04-29
 * Rev:    1.2.03
 * Author: John C. Scott <joscott@nvtl.com>
!function(d){var c="slideButton",r=":checkbox, :radio",u={duration:200,easing:"swing",labelOn:"&nbsp;",labelOff:"&nbsp;",resizeHandle:"auto",resizeContainer:"auto",enableDrag:!0,dragThreshold:5,enableFx:!0,allowRadioUncheck:!1,clickOffset:120,showLoader:!0,fadeLoader:!0,className:"",classContainer:"slidebutton-container",classLoader:"slidebutton-loader",classDisabled:"slidebutton-disabled",classFocus:"slidebutton-focus",classLabelOn:"slidebutton-label-on",classLabelOff:"slidebutton-label-off",classHandle:"slidebutton-handle",classHandleMiddle:"slidebutton-handle-middle",classHandleRight:"slidebutton-handle-right",classHandleActive:"slidebutton-active-handle",classPaddingLeft:"slidebutton-padding-left",classPaddingRight:"slidebutton-padding-right",init:null,change:null,click:null,disable:null,destroy:null},h=u.labelOn,f=u.labelOff;d.fn.slideButton=function(a){var n=this,e=arguments;return n.each(function(){return g[a]?g[a].apply(n,Array.prototype.slice.call(e,1)):"object"!=typeof a&&a?void d.error("Method "+a+" does not exist in jQuery.fn.slideButton"):g.init.apply(n,e)})};function i(a){return a.pageX||(a.originalEvent.changedTouches?a.originalEvent.changedTouches[0].pageX:0)}var g={version:function(){return"1.2.03"},init:function(a){var n=this,e=d(n),t=e.data(c);if(d('label[for="'+e.attr("id")+'"]').click(function(a){a.preventDefault()}),!t){var i=d.extend(!0,{},u,a),s=i.labelOn==h&&i.labelOff==f;if(!e.is(r))return e.find(r).slideButton(a);"auto"==i.resizeHandle&&(i.resizeHandle=!s),"auto"==i.resizeContainer&&(i.resizeContainer=!s),e.wrap('<div class="'+d.trim(i.classContainer+" "+i.className)+'" />').after('<div class="'+i.classHandle+'"><div class="'+i.classHandleMiddle+'" /></div>');var l=e.siblings("."+i.classLabelOff),o=e.siblings("."+i.classLabelOn);e.data(c,{$container:e.parent(),$handle:e.siblings("."+i.classHandle),$offlabel:l,$offspan:l.children("div"),$onlabel:o,$onspan:o.children("div"),$loader:d('<div class="'+i.classLoader+'"></div>'),id:1,loading:!1,disabled:!1,width:{},handleRight:0,mouse:{dragging:!1,clicked:null},dragStart:{position:null,offset:null,time:null},options:i}),b.call(n),m.call(n),e.is(":disabled")&&g.disable.call(n,!0),k.call(n),d.isFunction(i.init)&&i.init.apply(n,[e,a]),e.prop("checked")?e.parent().addClass("isOn"):e.parent().addClass("isOff")}},toggle:function(a){var n=d(this),e=0<arguments.length?a:!n.prop("checked");n.prop("checked",e).trigger("change")},ajaxToggle:function(e){var t=this,a=d(t);g.init.call(t,e);var n=a.data(c);(e=n.options).change=function(a){var n=a[0].checked?e.checkUrl:e.uncheckUrl;e.showLoader&&g.addLoader.call(t),d.ajax({url:n,type:"POST",data:e.data,dataType:"json",success:function(a,n,e){4==e.readyState&&0==e.status&&g.undo.call(t)},error:function(a,n,e){g.undo.call(t)},complete:function(a,n){e.showLoader&&g.removeLoader.call(t,e.fadeLoader)}})}},disable:function(a){var n=d(this),e=n.data(c),t=e.options,i=0<arguments.length?a:!e.disabled;e.disabled=i,n.prop("disabled",i),e.$container[i?"addClass":"removeClass"](t.classDisabled),d.isFunction(t.disable)&&t.disable.apply(this,[disabled,n,t])},addLoader:function(){var a=d(this).data(c);a.$loader.prependTo(a.$container).show(),a.loading=!0},removeLoader:function(a){var n=d(this).data(c);0==a?(n.$loader.detach(),n.loading=!1):n.$loader.fadeOut("slow",function(){d(this).detach(),n.loading=!1})},repaint:function(){p.call(this)},undo:function(){var a=d(this);a.prop("checked",!a[0].checked),g.repaint.call(this),a.prop("checked")?(a.parent().removeClass("isOff"),a.parent().addClass("isOn")):(a.parent().removeClass("isOn"),a.parent().addClass("isOff"))},destroy:function(){var a=d(this),n=a.data(c),e=n.options;d([a[0],n.$container[0]]).unbind(".slideButton"),d(document).unbind(".slideButton"),n.$container.after(a).remove(),a.removeData(c),d.isFunction(e.destroy)&&e.destroy.apply(this,[a,e])}},p=function(a){var n=d(this),e=n.data(c),t=e.options,i=n[0].checked,s=i?e.handleRight:0;GLOBAL_PARAMETERS.rtl&&(s=i?0:e.handleRight),(!(0<arguments.length)||arguments[0])&&t.enableFx?(e.$handle.stop().animate({left:s},t.duration,t.easing),e.$onlabel.stop().animate({width:s+8},t.duration,t.easing),e.$onspan.stop().animate({marginLeft:s-e.handleRight},t.duration,t.easing),e.$offspan.stop().animate({marginRight:-s},t.duration,t.easing)):(e.$handle.css("left",s),e.$onlabel.css("width",s),e.$onspan.css("marginLeft",s-e.handleRight),e.$offspan.css("marginRight",-s))},b=function(){var a=d(this).data(c),n=a.options,e=a.width;(n.resizeHandle||n.resizeContainer)&&(e.onspan=a.$onspan.outerWidth(),e.offspan=a.$offspan.outerWidth()),n.resizeHandle?(e.handle=Math.min(e.onspan,e.offspan),a.$handle.css("width",e.handle)):e.handle=a.$handle.width(),n.resizeContainer?(e.container=Math.max(e.onspan,e.offspan)+e.handle+20,a.$container.css("width",e.container),a.$offlabel.css("width",e.container-5)):e.container=a.$container.width(),a.handleRight=e.container-(e.handle+2),p.call(this,!1)},m=function(){function n(a){s.call(e,a)}var e=this,a=d(e).data(c),t=a.options,i=function(a){l.call(e,a),d(document).unbind("mousemove.slideButton touchmove.slideButton",n),d(document).unbind("mouseup.slideButton touchend.slideButton",i)};$.call(e),a.$container.bind("mousedown.slideButton touchstart.slideButton",function(a){o.call(e,a),t.enableDrag&&d(document).bind("mousemove.slideButton touchmove.slideButton",n),d(document).bind("mouseup.slideButton touchend.slideButton",i)})},s=function(a){var n,e=d(this).data(c),t=e.options;!e.disabled&&e.mouse.clicked&&(n=i(a),a.preventDefault(),!e.mouse.dragging&&Math.abs(e.dragStart.position-n)>t.dragThreshold&&(e.mouse.dragging=!0),v.call(this,a,n))},l=function(a){if(d(this).data(c).mouse.clicked){var n=i(a);return a.preventDefault(),e.call(this,a,n),!1}},o=function(a){var n=d(this),e=n.data(c),t=e.options;d(a.target).is(r)||e.disabled||e.loading||!t.allowRadioUncheck&&n.is(":radio:checked")||(a.preventDefault(),e.mouse.clicked=e.$handle,e.dragStart.position=i(a),e.dragStart.time=(new Date).getTime(),e.dragStart.offset=e.dragStart.position-(parseInt(e.$handle.css("left"),10)||0))},v=function(a,n){var e,t=d(this).data(c),i=t.options;t.mouse.clicked==t.$handle&&(n!=t.dragStart.offset&&(t.mouse.dragging=!0,t.$container.addClass(i.classHandleActive)),e=Math.min(1,Math.max(0,(n-t.dragStart.offset)/t.handleRight)),t.$handle.css("left",e*t.handleRight),t.$onlabel.css("width",e*t.handleRight+0),t.$offspan.css("marginRight",-e*t.handleRight),t.$onspan.css("marginLeft",-(1-e)*t.handleRight))},e=function(a,n){var e,t,i,s=d(this),l=s.data(c),o=l.options;l.mouse.clicked==l.$handle&&(e=!0,!l.mouse.dragging||(new Date).getTime()-l.dragStart.time<o.clickOffset?(i=s.prop("checked"),s.prop("checked",!i),i?(l.$container.removeClass("isOff"),l.$container.addClass("isOn")):(l.$container.removeClass("isOn"),l.$container.addClass("isOff")),d.isFunction(o.click)&&o.click.apply(this,[!i,s,o])):(i=.5<=(t=(n-l.dragStart.offset)/l.handleRight),GLOBAL_PARAMETERS.rtl&&(i=t<=.5),s[0].checked==i&&(e=!1),s.prop("checked",i)),l.$container.removeClass(o.classHandleActive),l.mouse.clicked=null,l.mouse.dragging=null,e?s.trigger("change"):p.call(this))},$=function(){var n=this,e=d(n),t=e.data(c),i=t.options;e.bind("change.slideButton",function(){return!t.loading&&(p.call(n),e.prop("checked")?(t.$container.removeClass("isOff"),t.$container.addClass("isOn")):(t.$container.removeClass("isOn"),t.$container.addClass("isOff")),e.is(":radio")&&(a=e[0],d(a.form?a.form[a.name]:":radio[name="+a.name+"]").filter(":not(:checked)").slideButton("repaint")),void(d.isFunction(i.change)&&i.change.apply(n,[e,i])));var a}).bind("focus.slideButton",function(){t.$container.addClass(i.classFocus)}).bind("blur.slideButton",function(){t.$container.removeClass(i.classFocus)}).bind("keyup.slideButton",function(a){13==a.keyCode&&d(this).is(":focus")&&g.toggle.call(this)}),d.isFunction(i.click)&&e.bind("click.slideButton",function(){return!t.loading&&void i.click.apply(n,[e[0].checked,e,i])})},k=function(){var a=d(this),n=a.data(c);"Microsoft Internet Explorer"==navigator.appName&&(n.$container.find("*").addBack().attr("unselectable","on"),a.bind("click.slideButton",function(){n.loading||a.triggerHandler("change.slideButton")}))}}(jQuery);
