/**
 * slideButton jQuery Plug-in
 *
 * Copyright 2013 Novatel Wireless (http://www.nvtl.com/)
 *
 * Date:   2014-04-29
 * Rev:    1.2.03
 * Author: John C. Scott <joscott@nvtl.com>
 */
(function(e){var t="1.2.03";var n="slideButton";var r=":checkbox, :radio";var i={duration:200,easing:"swing",labelOn:"ON",labelOff:"OFF",resizeHandle:"auto",resizeContainer:"auto",enableDrag:true,dragThreshold:5,enableFx:true,allowRadioUncheck:false,clickOffset:120,showLoader:true,fadeLoader:true,className:"",classContainer:"slidebutton-container",classLoader:"slidebutton-loader",classDisabled:"slidebutton-disabled",classFocus:"slidebutton-focus",classLabelOn:"slidebutton-label-on",classLabelOff:"slidebutton-label-off",classHandle:"slidebutton-handle",classHandleMiddle:"slidebutton-handle-middle",classHandleRight:"slidebutton-handle-right",classHandleActive:"slidebutton-active-handle",classPaddingLeft:"slidebutton-padding-left",classPaddingRight:"slidebutton-padding-right",init:null,change:null,click:null,disable:null,destroy:null};var s=i.labelOn;var o=i.labelOff;e.fn.slideButton=function(t){var n=this;var r=arguments;return n.each(function(){if(u[t]){return u[t].apply(n,Array.prototype.slice.call(r,1))}else if(typeof t==="object"||!t){return u.init.apply(n,r)}else{e.error("Method "+t+" does not exist in jQuery.fn.slideButton")}})};var u={version:function(){return t},init:function(t){var a=this;var f=e(a);var h=f.data(n);var p=e('label[for="'+f.attr("id")+'"]');p.click(function(e){e.preventDefault()});if(!h){var d=0;var v=e.extend(true,{},i,t);var m=v.labelOn==s&&v.labelOff==o;if(!f.is(r)){return f.find(r).slideButton(t)}if(v.resizeHandle=="auto")v.resizeHandle=!m;if(v.resizeContainer=="auto")v.resizeContainer=!m;f.wrap('<div class="'+e.trim(v.classContainer+" "+v.className)+'" />').after('<div class="'+v.classHandle+'"><div class="'+v.classHandleRight+'"><div class="'+v.classHandleMiddle+'" /></div></div>'+'<div class="'+v.classLabelOff+'"><div>'+v.labelOff+"</div></div>"+'<div class="'+v.classLabelOn+'"><div>'+v.labelOn+"</div></div>"+'<div class="'+v.classPaddingLeft+'"></div><div class="'+v.classPaddingRight+'"></div>');var g=f.siblings("."+v.classLabelOff);var b=f.siblings("."+v.classLabelOn);f.data(n,{$container:f.parent(),$handle:f.siblings("."+v.classHandle),$offlabel:g,$offspan:g.children("div"),$onlabel:b,$onspan:b.children("div"),$loader:e('<div class="'+v.classLoader+'"></div>'),id:++d,loading:false,disabled:false,width:{},handleRight:0,mouse:{dragging:false,clicked:null},dragStart:{position:null,offset:null,time:null},options:v});l.call(a);c.call(a);if(f.is(":disabled"))u.disable.call(a,true);y.call(a);if(e.isFunction(v.init))v.init.apply(a,[f,t])}},toggle:function(t){var n=e(this);var r=arguments.length>0?t:!n.prop("checked");n.prop("checked",r).trigger("change")},ajaxToggle:function(t){var r=this;var i=e(r);u.init.call(r,t);var s=i.data(n);var t=s.options;t.change=function(n){var i=n[0].checked?t.checkUrl:t.uncheckUrl;if(t.showLoader)u.addLoader.call(r);e.ajax({url:i,type:"POST",data:t.data,dataType:"json",success:function(e,t,n){if(n.readyState==4&&n.status==0)u.undo.call(r)},error:function(e,t,n){u.undo.call(r)},complete:function(e,n){if(t.showLoader)u.removeLoader.call(r,t.fadeLoader)}})}},disable:function(t){var r=this;var i=e(r);var s=i.data(n);var o=s.options;var u=arguments.length>0?t:!s.disabled;s.disabled=u;i.prop("disabled",u);s.$container[u?"addClass":"removeClass"](o.classDisabled);if(e.isFunction(o.disable))o.disable.apply(r,[disabled,i,o])},addLoader:function(){var t=e(this).data(n);t.$loader.prependTo(t.$container).show();t.loading=true},removeLoader:function(t){var r=e(this).data(n);if(t==false){r.$loader.detach();r.loading=false}else{r.$loader.fadeOut("slow",function(){e(this).detach();r.loading=false})}},repaint:function(){a.call(this)},undo:function(){var t=this;var n=e(t);n.prop("checked",!n[0].checked);u.repaint.call(t)},destroy:function(){var t=this;var r=e(this);var i=r.data(n);var s=i.options;e([r[0],i.$container[0]]).unbind(".slideButton");e(document).unbind(".slideButton");i.$container.after(r).remove();r.removeData(n);if(e.isFunction(s.destroy))s.destroy.apply(t,[r,s])}};var a=function(t){var r=e(this);var i=r.data(n);var s=i.options;var o=r[0].checked;var u=o?i.handleRight:0;var t=arguments.length>0?arguments[0]:true;if(t&&s.enableFx){i.$handle.stop().animate({left:u},s.duration,s.easing);i.$onlabel.stop().animate({width:u+4},s.duration,s.easing);i.$onspan.stop().animate({marginLeft:u-i.handleRight},s.duration,s.easing);i.$offspan.stop().animate({marginRight:-u},s.duration,s.easing)}else{i.$handle.css("left",u);i.$onlabel.css("width",u+4);i.$onspan.css("marginLeft",u-i.handleRight);i.$offspan.css("marginRight",-u)}};var f=function(e){return e.pageX||(e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:0)};var l=function(){var t=e(this).data(n);var r=t.options;var i=t.width;if(r.resizeHandle||r.resizeContainer){i.onspan=t.$onspan.outerWidth();i.offspan=t.$offspan.outerWidth()}if(r.resizeHandle){i.handle=Math.min(i.onspan,i.offspan);t.$handle.css("width",i.handle)}else{i.handle=t.$handle.width()}if(r.resizeContainer){i.container=Math.max(i.onspan,i.offspan)+i.handle+20;t.$container.css("width",i.container);t.$offlabel.css("width",i.container-5)}else{i.container=t.$container.width()}t.handleRight=i.container-i.handle-6;a.call(this,false)};var c=function(){var t=this;var r=e(t);var i=r.data(n);var s=i.options;var o=function(e){h.call(t,e)};var u=function(n){p.call(t,n);e(document).unbind("mousemove.slideButton touchmove.slideButton",o);e(document).unbind("mouseup.slideButton touchend.slideButton",u)};g.call(t);i.$container.bind("mousedown.slideButton touchstart.slideButton",function(n){d.call(t,n);if(s.enableDrag)e(document).bind("mousemove.slideButton touchmove.slideButton",o);e(document).bind("mouseup.slideButton touchend.slideButton",u)})};var h=function(t){var r=this;var i=e(r);var s=i.data(n);var o=s.options;if(!(!s.disabled&&s.mouse.clicked))return;var u=f(t);t.preventDefault();if(!s.mouse.dragging&&Math.abs(s.dragStart.position-u)>o.dragThreshold){s.mouse.dragging=true}v.call(r,t,u)};var p=function(t){var r=this;var i=e(r);var s=i.data(n);if(!s.mouse.clicked)return;var o=f(t);t.preventDefault();m.call(r,t,o);return false};var d=function(t){var i=this;var s=e(i);var o=s.data(n);var u=o.options;if(e(t.target).is(r)||o.disabled||o.loading||!u.allowRadioUncheck&&s.is(":radio:checked"))return;t.preventDefault();o.mouse.clicked=o.$handle;o.dragStart.position=f(t);o.dragStart.time=(new Date).getTime();o.dragStart.offset=o.dragStart.position-(parseInt(o.$handle.css("left"),10)||0)};var v=function(t,r){var i=this;var s=e(i);var o=s.data(n);var u=o.options;if(o.mouse.clicked!=o.$handle)return;if(r!=o.dragStart.offset){o.mouse.dragging=true;o.$container.addClass(u.classHandleActive)}var a=Math.min(1,Math.max(0,(r-o.dragStart.offset)/o.handleRight));o.$handle.css("left",a*o.handleRight);o.$onlabel.css("width",a*o.handleRight+4);o.$offspan.css("marginRight",-a*o.handleRight);o.$onspan.css("marginLeft",-(1-a)*o.handleRight)};var m=function(t,r){var i=this;var s=e(i);var o=s.data(n);var u=o.options;if(o.mouse.clicked!=o.$handle)return;var f=true;if(!o.mouse.dragging||(new Date).getTime()-o.dragStart.time<u.clickOffset){var l=s.prop("checked");s.prop("checked",!l);if(e.isFunction(u.click))u.click.apply(i,[!l,s,u])}else{var c=(r-o.dragStart.offset)/o.handleRight;var l=c>=.5;if(s[0].checked==l)f=false;s.prop("checked",l)}o.$container.removeClass(u.classHandleActive);o.mouse.clicked=null;o.mouse.dragging=null;if(f){s.trigger("change")}else{a.call(i)}};var g=function(){var t=this;var r=e(t);var i=r.data(n);var s=i.options;r.bind("change.slideButton",function(){if(i.loading)return false;a.call(t);if(r.is(":radio")){var n=r[0];var o=e(n.form?n.form[n.name]:":radio[name="+n.name+"]");o.filter(":not(:checked)").slideButton("repaint")}if(e.isFunction(s.change))s.change.apply(t,[r,s])}).bind("focus.slideButton",function(){i.$container.addClass(s.classFocus)}).bind("blur.slideButton",function(){i.$container.removeClass(s.classFocus)}).bind("keyup.slideButton",function(t){if(t.keyCode==13&&e(this).is(":focus")){u.toggle.call(this)}});if(e.isFunction(s.click)){r.bind("click.slideButton",function(){if(i.loading)return false;s.click.apply(t,[r[0].checked,r,s])})}};var y=function(){var t=e(this);var r=t.data(n);if(navigator.appName=="Microsoft Internet Explorer"){r.$container.find("*").addBack().attr("unselectable","on");t.bind("click.slideButton",function(){if(r.loading)return;t.triggerHandler("change.slideButton")})}}})(jQuery)